<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" media="screen and(max width:768)" href="style/mobile.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/bf77ad3b6f.js" crossorigin="anonymous"></script>
    <title>Add Teachers</title>
</head>

<body id="add-teachers">
    <nav class="main-nav">
        <div class="container">
            <div class="logo">
                <h1>LOGO</h1>
            </div>
            <div class="nav">
                <ul>
                    <li>
                        <div class="user">
                            <h1>Tomek</h1>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <header class="tittle-container">
            <h1>Dodaj nauczyciela</h1>   
    </header>
    <section id="add">
        <div class="container">
           
            <div class="card-container">
                <div class="card-tittle">
                    <ul>
                        <li>IMIĘ</li>
                        <li>NAZWISKO</li>
                        <li>ILOŚĆ GODZIN</li>

                    </ul>
                </div>

                  <!-- <form action="#">--> 
                    <ul class="ul-add green-shadow">
                        <li> <input type="text" id="imie" name="imie" placeholder="Imie"></li>
                        <li> <input type="text" id="nazwisko" name="Nazwisko" placeholder="Nazwisko"></li>
                        <li> <input type="number" id="count" name="count" placeholder="1"></li>
                        <li>
                            <div class="btn-container">
                                <input id="addNew" class="btn btn-dark" type="submit" value="DODAJ">
                            </div>
                        </li>
                        <li class="planner">
                            <table id="add-table" class="dark-shadow">
                                <thead>
                                    <tr>
                                        <th>Godziny</th>
                                        <th>Poniedziałek</th>
                                        <th>Wtorek</th>
                                        <th>Środa</th>
                                        <th>Czwartek</th>
                                        <th>Piątek</th>
                                       </tr>
                                </thead>
                                <tbody>
                                    <tr id="8">
                                        <td>8-9</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek" class="myinput large custom" ></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda" class="myinput large custom"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>

                                    </tr>
                                    <tr id="9">
                                        <td>9-10</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                      

                                    </tr>
                                    <tr id="10">
                                        <td>10-11</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                        
                                    </tr>
                                    <tr id="11">
                                        <td>11-12</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                     

                                    </tr>
                                    <tr id="12">
                                        <td>12-13</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>

                                    </tr>
                                    <tr id="13">
                                        <td>13-14</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                         </tr>
                                      <tr id="14">
                                            <td>14-15</td>
                                            <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                            <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                            <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                            <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                            <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                      </tr>
                                    <tr id="15">
                                        <td>15-16</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                      </tr>
                                    <tr id="16">
                                        <td>16-17</td>
                                        <td><input type="checkbox" id="1-poniedzialek" name="1-poniedzialek"></td>
                                        <td><input type="checkbox" id="1-wtorek" name="1-wtorek"></td>
                                        <td><input type="checkbox" id="1-sroda" name="1-sroda"></td>
                                        <td><input type="checkbox" id="1-czawrtek" name="1-czawrtek"></td>
                                        <td><input type="checkbox" id="1-piatek" name="1-piatek"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </li>
                    </ul>
                    <div class="under-tittle-container">
                        <h6>Dodani nauczyciele</h>
                    </div>
                    <div class="all-seperate"> 
                   
                    </div>
                   
                    <div class="btn-container-center">
                        <a class="btn btn-dark" href="index.html">
                            <p>ZAPISZ</p>
                        </a>
                   
                    </div>
                   <!--</form>--> 
            </div>

        </div>
    </section>
    <footer>
        <p>LOREM IPSUM</p>
    </footer>


    <script>
       
       var nauczycieleId=0;
       let nauczycieleList = [] ;
        class Nauczyciel{
            constructor(imie, nazwisko, ilosc_godzin, tablica){
                this.id=nauczycieleId++;
                this.imie=imie;
                this.nazwisko=nazwisko;
                this.ilosc_godzin=ilosc_godzin;
                this.dostepnoscArr = tablica;
            }
            
        }


        class UI {  

            static addNauczycielToList(nauczyciel){
      
                const list2 = document.querySelector('.all-seperate');
                const row2 = document.createElement('button');
                row2.className = "unhiden_item dark-shadow";
                row2.id=nauczyciel.id+"item";

                row2.innerHTML= `

                <ul class="item">
                            <li> <p>${nauczyciel.imie}</p> </li>
                            <li> <p>${nauczyciel.nazwisko}</p> </li>
                                <li><p>${nauczyciel.ilosc_godzin}</p> </li>
                           
                            <li>
                                <div class="btn-container">
                                    <input id=${nauczyciel.id} class="btn btn-dark delete" type="submit" value="USUŃ">
                                </div>
                            </li>
                 </ul>
                `;


            row2.addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
              panel.style.maxHeight = null;
            } else {
              panel.style.maxHeight = panel.scrollHeight + "px";
            }});
            //usuwanie nauczyciela i update tablicy nauczyciela, usuniecie schowanego panelu
            row2.addEventListener('click' ,(e) => {
                   
                   UI.deleteTeacher(e.target);
                   let s= e.target.id;
                   UI.deletePanel(e.target,s);
                   for( var i = 0; i < nauczycieleList.length; i++){ 
                        if ( nauczycieleList[i].id == s) 
                       {  nauczycieleList.splice(i, 1); }
                    }

                    localStorage.setItem('MyTeachers', JSON.stringify(nauczycieleList));

            });
                list2.appendChild(row2);

                const row3=document.createElement('div');
                row3.className='panel';
                row3.id=nauczyciel.id+"panel";


                const row4 = document.createElement('table');
                row4.className='hidden_item';
                row4.innerHTML= `
                <thead>
                            <tr>
                                <tr>
                                    <th>Godziny</th>
                                    <th>Poniedziałek</th>
                                    <th>Wtorek</th>
                                    <th>Środa</th>
                                    <th>Czwartek</th>
                                    <th>Piątek</th>
                                   </tr>
                            </tr>
                </thead>
                `;

                const row6= document.createElement('tbody');
                for (var i = 0; i< nauczyciel.dostepnoscArr.length; i++)
                {
                    const row5 = document.createElement('tr');

                    row5.innerHTML=`
                    <td>${i+8}-${i+9}</td>
                    `;

                    for(var j=0; j < nauczyciel.dostepnoscArr[i].length; j++){
                        const row7 = document.createElement('td');
                        if(nauczyciel.dostepnoscArr[i][j] == 1){
                            row7.innerHTML=`<td><input type="checkbox" ></td>`;
                        }
                        else{
                            row7.innerHTML=`<td><input type="checkbox" checked ></td>`;
                        }

                        row5.appendChild(row7);
                    }

                    row6.appendChild(row5);
                }
              
        
                row4.appendChild(row6);
                row3.appendChild(row4);
                list2.appendChild(row3);

            }

            static deleteTeacher(element){
                if(element.classList.contains('delete')){
                element.parentElement.parentElement.parentElement.remove();  
                }
              
            }

            static deletePanel(element, id){
                if(element.classList.contains('delete')){
                var el = document.getElementById(id+"panel");
                el.remove();
                var e = document.getElementById(id+"item");
                e.remove();
                }
            }
            static clearFields(){
                document.querySelector('#imie').value= '';
                document.querySelector('#nazwisko').value= '';
                document.querySelector('#count').value= '';
                var grid = document.getElementById("add-table"); 
                var checkBoxes = grid.getElementsByTagName("INPUT");

                for (var i = 0; i < checkBoxes.length; i++) {
                checkBoxes[i].checked = false;  
                }

            }
        }

        var addNew = document.querySelector('#addNew');
        addNew.addEventListener('click', (e) => {
            e.preventDefault();

            const imie = document.querySelector('#imie').value;
            const nazwisko = document.querySelector('#nazwisko').value;
            const ilosc = document.querySelector('#count').value;
        
        

            let dostepnosc = [];
            let array8 = [], array9 =[], array10 = [], array11 =[], array12 = [], array13 =[], array14 = [], array15 =[], array16 = [], array17 =[];
            var grid = document.getElementById("8"); 
            var checkBoxes = grid.getElementsByTagName("INPUT");

            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array8[i]="0";
               else array8[i]="1";   
            }
            dostepnosc.push(array8);

            grid = document.getElementById("9"); 
            checkBoxes = grid.getElementsByTagName("INPUT");

            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array9[i]="0";
               else array9[i]="1";   
            }
            dostepnosc.push(array9);

            grid = document.getElementById("10"); 
            checkBoxes = grid.getElementsByTagName("INPUT");

            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array10[i]="0";
               else array10[i]="1";   
            }
            dostepnosc.push(array10);

            grid = document.getElementById("11"); 
            checkBoxes = grid.getElementsByTagName("INPUT");

            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array11[i]="0";
               else array11[i]="1";   
            }
            dostepnosc.push(array11);

            grid = document.getElementById("12"); 
            checkBoxes = grid.getElementsByTagName("INPUT");
            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array12[i]="0";
               else array12[i]="1";   
            }
            dostepnosc.push(array12);

            grid = document.getElementById("13"); 
            checkBoxes = grid.getElementsByTagName("INPUT");
            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array13[i]="0";
               else array13[i]="1";   
            }
            dostepnosc.push(array13);

            grid = document.getElementById("14"); 
            checkBoxes = grid.getElementsByTagName("INPUT");
            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array14[i]="0";
               else array14[i]="1";   
            }
            dostepnosc.push(array14);

            grid = document.getElementById("15"); 
            checkBoxes = grid.getElementsByTagName("INPUT");
            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array15[i]="0";
               else array15[i]="1";   
            }
            dostepnosc.push(array15);

            grid = document.getElementById("16"); 
            checkBoxes = grid.getElementsByTagName("INPUT");
            for (var i = 0; i < checkBoxes.length; i++) {
               if (checkBoxes[i].checked)
               array16[i]="0";
               else array16[i]="1";   
            }
            dostepnosc.push(array16);

            console.log(dostepnosc);

            nauczyciel = new Nauczyciel(imie, nazwisko, ilosc, dostepnosc);

            nauczycieleList.push(nauczyciel);

            UI.addNauczycielToList(nauczyciel);
            localStorage.setItem('MyTeachers', JSON.stringify(nauczycieleList));
            UI.clearFields();
           
        });
    
        </script>
        
</body>

</html>